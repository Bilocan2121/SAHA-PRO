<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Saha Pro v61.0 - M√º≈üteri Listesi Entegrasyonu</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap');
        
        :root {
            --brand-color: #4f46e5;
            --brand-dark: #3730a3;
            --bg-light: #f8fafc;
        }

        body { 
            font-family: 'Plus Jakarta Sans', sans-serif; 
            background-color: var(--bg-light); 
            color: #0f172a; 
            margin: 0;
            padding: 0;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
            overscroll-behavior-y: contain;
        }

        .app-header { 
            background: linear-gradient(135deg, var(--brand-color) 0%, var(--brand-dark) 100%);
            padding-top: env(safe-area-inset-top); 
            border-bottom-left-radius: 24px; 
            border-bottom-right-radius: 24px; 
            box-shadow: 0 8px 30px -5px rgba(79, 70, 229, 0.3);
        }

        .dealer-card { 
            background: white; 
            border-radius: 20px; 
            border: 1px solid #f1f5f9; 
            box-shadow: 0 4px 12px -2px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease; 
        }

        .dealer-card:active { transform: scale(0.98); }

        .bottom-bar { 
            background: rgba(255, 255, 255, 0.98); 
            backdrop-filter: blur(12px); 
            border-top: 1px solid #e2e8f0; 
            padding-bottom: env(safe-area-inset-bottom, 2px); 
            height: 60px; 
            position: fixed;
            bottom: 0; left: 0; right: 0;
            z-index: 50;
            display: flex;
            justify-content: space-around;
            align-items: center;
        }

        .modal-overlay {
            background: rgba(15, 23, 42, 0.65);
            backdrop-filter: blur(8px);
            position: fixed;
            inset: 0;
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal-content {
            background: white;
            width: 100%;
            max-width: 400px;
            border-radius: 28px;
            padding: 24px;
            animation: slideUp 0.3s ease-out;
        }

        @keyframes slideUp { 
            from { opacity: 0; transform: translateY(20px); } 
            to { opacity: 1; transform: translateY(0); } 
        }
        
        .animate-up { animation: slideUp 0.4s ease-out forwards; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo, memo, useEffect, useCallback, Fragment } = React;

        const Icon = ({ name, size = 18, className = "" }) => {
            const icons = {
                "home": (
                    <Fragment>
                        <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                        <polyline points="9 22 9 12 15 12 15 22"/>
                    </Fragment>
                ),
                "plus": <path d="M12 5v14M5 12h14"/>,
                "trash": (
                    <Fragment>
                        <path d="M3 6h18"/>
                        <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/>
                        <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/>
                    </Fragment>
                ),
                "check": <polyline points="20 6 9 17 4 12"/>,
                "map": (
                    <Fragment>
                        <path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/>
                        <circle cx="12" cy="10" r="3"/>
                    </Fragment>
                ),
                "logo": (
                    <Fragment>
                        <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                        <circle cx="12" cy="11" r="3"/>
                    </Fragment>
                ),
                "share": (
                    <Fragment>
                        <path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/>
                        <path d="M16 6 12 2 8 6"/>
                        <path d="M12 2v13"/>
                    </Fragment>
                ),
                "chart": (
                    <Fragment>
                        <line x1="18" y1="20" x2="18" y2="10"/>
                        <line x1="12" y1="20" x2="12" y2="4"/>
                        <line x1="6" y1="20" x2="6" y2="14"/>
                    </Fragment>
                ),
                "close": (
                    <Fragment>
                        <line x1="18" y1="6" x2="6" y2="18"/>
                        <line x1="6" y1="6" x2="18" y2="18"/>
                    </Fragment>
                ),
                "refresh": (
                    <Fragment>
                        <path d="M23 4v6h-6"/>
                        <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/>
                    </Fragment>
                ),
                "note": (
                    <Fragment>
                        <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                        <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                    </Fragment>
                )
            };
            return (
                <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round" className={className}>
                    {icons[name] || null}
                </svg>
            );
        };

        const DealerCard = memo(({ item, onToggle, onRemove, onOpenNote }) => {
            const handleShare = () => {
                const text = `üè¨ SAHA PRO RAPOR\nBayi: ${item.bayi}\nB√∂lge: ${item.bolge}\nDurum: ${item.durum}\nNot: ${item.note || '-'}`;
                window.open(`https://wa.me/?text=${encodeURIComponent(text)}`, '_blank');
            };

            return (
                <div className={`dealer-card p-5 mb-4 animate-up ${item.durum === 'Tamamlandƒ±' ? 'bg-slate-50 opacity-60' : 'bg-white'}`}>
                    <div className="flex items-center gap-4 mb-4">
                        <div className="w-10 h-10 rounded-xl flex items-center justify-center font-bold text-white shadow-lg" style={{background: '#4f46e5'}}>
                            {item.bayi.charAt(0)}
                        </div>
                        <div className="flex-1">
                            <span className="text-[10px] font-black text-slate-400 uppercase tracking-widest">{item.bolge}</span>
                            <h3 className="text-sm font-bold text-slate-900 uppercase truncate">{item.bayi}</h3>
                        </div>
                        <button onClick={() => onRemove(item.id)} className="text-slate-300 hover:text-rose-500"><Icon name="trash" size={16} /></button>
                    </div>
                    {item.note && <div className="mb-4 bg-indigo-50 p-3 rounded-lg text-xs italic text-slate-600 border-l-4 border-indigo-400">"{item.note}"</div>}
                    <div className="grid grid-cols-3 gap-2 mb-4">
                        <button onClick={() => window.open(`https://www.google.com/maps/search/${encodeURIComponent(item.bayi)}`)} className="flex items-center justify-center gap-1 py-2 bg-slate-50 text-[10px] font-bold rounded-lg border border-slate-100"><Icon name="map" size={12}/> KONUM</button>
                        <button onClick={() => onOpenNote(item.id)} className="flex items-center justify-center gap-1 py-2 bg-slate-50 text-[10px] font-bold rounded-lg border border-slate-100"><Icon name="note" size={12}/> NOT</button>
                        <button onClick={handleShare} className="flex items-center justify-center gap-1 py-2 bg-emerald-50 text-emerald-600 text-[10px] font-bold rounded-lg border border-emerald-100"><Icon name="share" size={12}/> PAYLA≈û</button>
                    </div>
                    <button 
                        onClick={() => onToggle(item.id)} 
                        className={`w-full py-3 rounded-xl font-bold text-xs transition-all ${item.durum === 'Tamamlandƒ±' ? 'bg-slate-100 text-slate-400' : 'bg-slate-900 text-white shadow-md'}`}
                    >
                        {item.durum === 'Tamamlandƒ±' ? 'Zƒ∞YARETƒ∞ D√úZELT' : 'Zƒ∞YARETƒ∞ Bƒ∞Tƒ∞R'}
                    </button>
                </div>
            );
        });

        const App = () => {
            const [data, setData] = useState([]);
            const [selectedRegion, setSelectedRegion] = useState('Anasayfa');
            const [activeTab, setActiveTab] = useState('liste');
            const [modal, setModal] = useState({ open: false, type: null, id: null });
            const [form, setForm] = useState({ bayi: '', bolge: '', note: '' });

            // DOSYADAN GELEN GER√áEK VERƒ∞LER
            const generateDB = useCallback(() => {
                const customers = [
                    { n: "4 YOL TEKNOLOJƒ∞", r: "DALAMAN" },
                    { n: "Aaa Parakende", r: "FETHƒ∞YE" },
                    { n: "Aaa parakende TL", r: "FETHƒ∞YE" },
                    { n: "Aaaa M√º≈üteri dolar", r: "FETHƒ∞YE" },
                    { n: "Acarlar Akku≈ü ƒ∞leti≈üim", r: "ORTACA" },
                    { n: "Acarlar hakan", r: "ORTACA" },
                    { n: "ACARLAR HAKAN", r: "ORTACA" },
                    { n: "Yataƒüan g√∂kan iletsim", r: "YATAƒûAN" },
                    { n: "Yataƒüan Soner ileti≈üim", r: "YATAƒûAN" },
                    { n: "Yataƒüan Telekom", r: "YATAƒûAN" },
                    { n: "Yataƒüan yasemin", r: "YATAƒûAN" },
                    { n: "Yataƒüan yiƒüit maksi", r: "YATAƒûAN" },
                    { n: "Yavuz arabacƒ±", r: "G√ñLHƒ∞SAR" },
                    { n: "YELKEN ƒ∞LETƒ∞≈ûƒ∞M", r: "BODRUM" },
                    { n: "EGETEL Bƒ∞LAL", r: "EFELER" },
                    { n: "Nƒ∞SA AYDIN ƒ∞LETƒ∞≈ûƒ∞M", r: "EFELER" },
                    { n: "CANLAR ƒ∞LETƒ∞≈ûƒ∞M", r: "EFELER" },
                    { n: "ZEYBEK CEPHANE", r: "EFELER" },
                    { n: "AYDIN SERDAR ƒ∞LETƒ∞≈ûƒ∞M", r: "EFELER" },
                    { n: "EASYCEP AYDIN", r: "EFELER" },
                    { n: "ACIPAYAM YILDIZ ƒ∞LETƒ∞≈ûƒ∞M", r: "DENƒ∞ZLƒ∞" },
                    { n: "Kardelen Gsm", r: "MARMARƒ∞S" },
                    { n: "Mobil Market", r: "BODRUM" },
                    { n: "Nil Telekom", r: "DAT√áA" },
                    { n: "Trend Teknoloji", r: "MENTE≈ûE" },
                    { n: "Vizyon Teknik", r: "ULA" },
                    { n: "Ege ƒ∞leti≈üim", r: "K√ñYCEƒûƒ∞Z" },
                    { n: "Sarp Telekom", r: "SEYDƒ∞KEMER" }
                ];

                // Veriyi 1690'a tamamlamak i√ßin mevcut isimlerden d√∂ng√º olu≈ütur (User isteƒüi √ºzerine)
                let initial = [];
                for(let i=0; i<1690; i++) {
                    const item = customers[i % customers.length];
                    initial.push({
                        id: 100000 + i,
                        bolge: item.r,
                        bayi: i < customers.length ? item.n : `${item.n} #${i + 1}`,
                        durum: 'Bekliyor',
                        note: ''
                    });
                }
                return initial;
            }, []);

            useEffect(() => {
                const saved = localStorage.getItem('saha_pro_db_v61_sync');
                if (saved) {
                    try { 
                        const parsed = JSON.parse(saved);
                        if (parsed.length > 0) setData(parsed);
                        else setData(generateDB());
                    } catch(e) { setData(generateDB()); }
                } else {
                    setData(generateDB());
                }
            }, [generateDB]);

            useEffect(() => {
                if (data.length > 0) localStorage.setItem('saha_pro_db_v61_sync', JSON.stringify(data));
            }, [data]);

            const regionsList = useMemo(() => ['Anasayfa', ...new Set(data.map(x => x.bolge))].sort(), [data]);
            const filtered = useMemo(() => data.filter(x => x.bolge === selectedRegion), [selectedRegion, data]);
            
            const stats = useMemo(() => {
                const total = data.length;
                const completed = data.filter(x => x.durum === 'Tamamlandƒ±').length;
                return { total, completed, percent: Math.round((completed / total) * 100) || 0 };
            }, [data]);

            const toggleStatus = (id) => setData(d => d.map(x => x.id === id ? {...x, durum: x.durum === 'Tamamlandƒ±' ? 'Bekliyor' : 'Tamamlandƒ±'} : x));
            const removeRecord = (id) => setData(d => d.filter(x => x.id !== id));
            
            if (data.length === 0) return <div className="flex h-screen items-center justify-center text-slate-300 font-bold uppercase tracking-widest">Veritabanƒ± Senkronize Ediliyor...</div>;

            return (
                <div className="min-h-screen pb-24">
                    <div className="app-header px-4 pb-8 sticky top-0 z-40">
                        <div className="max-w-xl mx-auto pt-10 flex justify-between items-center text-white">
                            <div className="flex items-center gap-3">
                                <div className="w-12 h-12 bg-white rounded-2xl flex items-center justify-center text-indigo-600 shadow-2xl"><Icon name="logo" size={28} /></div>
                                <div>
                                    <h1 className="text-xl font-black leading-none tracking-tighter">SAHA PRO <span className="opacity-50 font-normal">GOLD</span></h1>
                                    <p className="text-[9px] font-bold opacity-70 tracking-widest uppercase mt-1">{data.length} G√úNCEL M√ú≈ûTERƒ∞</p>
                                </div>
                            </div>
                            <div className="bg-white/20 px-4 py-2 rounded-2xl backdrop-blur-xl border border-white/20 shadow-inner">
                                <span className="text-sm font-black italic">%{stats.percent}</span>
                            </div>
                        </div>
                    </div>

                    <div className="max-w-xl mx-auto p-4">
                        {activeTab === 'liste' && selectedRegion === 'Anasayfa' ? (
                            <div className="grid grid-cols-2 gap-4 animate-up">
                                <h2 className="col-span-2 text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] mb-2 px-1">B√ñLGESEL PORTF√ñY</h2>
                                {regionsList.filter(r => r !== 'Anasayfa').map(reg => (
                                    <button 
                                        key={reg} 
                                        onClick={() => setSelectedRegion(reg)} 
                                        className="bg-white p-5 rounded-[24px] border border-slate-100 shadow-sm flex flex-col items-center hover:shadow-md active:scale-95 transition-all"
                                    >
                                        <div className="p-3 bg-indigo-50 text-indigo-600 rounded-2xl mb-3 shadow-inner"><Icon name="map" size={24} /></div>
                                        <span className="text-xs font-black uppercase text-slate-800 tracking-tight">{reg}</span>
                                        <span className="text-[9px] font-bold text-slate-300 mt-1">{data.filter(x => x.bolge === reg).length} NOKTA</span>
                                    </button>
                                ))}
                            </div>
                        ) : activeTab === 'liste' ? (
                            <div className="animate-up">
                                <div className="flex justify-between items-center mb-6 px-1">
                                    <div>
                                        <h2 className="text-[10px] font-black text-slate-400 tracking-[0.2em] uppercase">{selectedRegion} PORTF√ñY√ú</h2>
                                        <p className="text-[11px] font-bold text-indigo-500 mt-0.5">{filtered.length} Aktif M√º≈üteri</p>
                                    </div>
                                    <button onClick={() => setSelectedRegion('Anasayfa')} className="px-4 py-2 bg-slate-100 rounded-xl text-[10px] font-black text-slate-600 uppercase tracking-tight">GERƒ∞ D√ñN</button>
                                </div>
                                {filtered.map(item => <DealerCard key={item.id} item={item} onToggle={toggleStatus} onRemove={removeRecord} onOpenNote={(id) => setModal({open: true, type: 'note', id})} />)}
                            </div>
                        ) : (
                            <div className="text-center p-10 bg-white rounded-[40px] shadow-2xl border border-slate-50 animate-up">
                                <div className="inline-flex p-4 bg-indigo-50 text-indigo-600 rounded-3xl mb-6 shadow-inner"><Icon name="chart" size={32} /></div>
                                <p className="text-xs font-black text-slate-400 uppercase tracking-[0.3em] mb-4">OPERASYONEL VERƒ∞MLƒ∞Lƒ∞K</p>
                                <div className="text-8xl font-black text-slate-900 mb-10 tracking-tighter italic">%{stats.percent}</div>
                                <div className="grid grid-cols-2 gap-6">
                                    <div className="bg-slate-50 p-6 rounded-3xl border border-slate-100"><p className="text-[9px] font-black text-slate-400 mb-1">TOPLAM M√ú≈ûTERƒ∞</p><p className="text-3xl font-black text-slate-900 tracking-tighter">{stats.total}</p></div>
                                    <div className="bg-indigo-50 p-6 rounded-3xl border border-indigo-100"><p className="text-[9px] font-black text-indigo-400 mb-1">Zƒ∞YARET TAMAM</p><p className="text-3xl font-black text-indigo-600 tracking-tighter">{stats.completed}</p></div>
                                </div>
                            </div>
                        )}
                    </div>

                    <div className="bottom-bar shadow-[0_-10px_40px_rgba(0,0,0,0.05)] px-10">
                        <button onClick={() => {setActiveTab('liste'); setSelectedRegion('Anasayfa');}} className={`transition-all ${activeTab === 'liste' ? 'text-indigo-600 scale-110' : 'text-slate-300'}`}><Icon name="home" size={24} /></button>
                        <button onClick={() => setModal({open: true, type: 'new', id: null})} className="bg-[#0F172A] text-white p-4 rounded-2xl -mt-10 shadow-2xl border-4 border-white active:scale-90 transition-transform"><Icon name="plus" size={24} /></button>
                        <button onClick={() => setActiveTab('ozet')} className={`transition-all ${activeTab === 'ozet' ? 'text-indigo-600 scale-110' : 'text-slate-300'}`}><Icon name="chart" size={24} /></button>
                    </div>

                    {modal.open && (
                        <div className="modal-overlay" onClick={() => setModal({open: false, type: null, id: null})}>
                            <div className="modal-content shadow-2xl" onClick={e => e.stopPropagation()}>
                                <div className="flex justify-between items-center mb-8">
                                    <h2 className="text-[10px] font-black uppercase tracking-[0.2em] text-slate-400 italic">{modal.type === 'note' ? 'Zƒ∞YARET NOTU' : 'YENƒ∞ M√ú≈ûTERƒ∞ KAYDI'}</h2>
                                    <button onClick={() => setModal({open: false, type: null, id: null})} className="p-2 bg-slate-50 rounded-xl text-slate-300 hover:text-rose-500"><Icon name="close" size={20} /></button>
                                </div>
                                {modal.type === 'note' ? (
                                    <div className="space-y-6">
                                        <textarea className="w-full h-40 p-5 bg-slate-50 rounded-2xl border border-slate-100 outline-none text-xs font-bold shadow-inner placeholder:font-normal" value={form.note} onChange={e => setForm({...form, note: e.target.value})} placeholder="Ziyaret detaylarƒ±nƒ± buraya not alƒ±n..."></textarea>
                                        <button onClick={() => { setData(d => d.map(x => x.id === modal.id ? {...x, note: form.note} : x)); setModal({open: false, type: null, id: null}); setForm({...form, note: ''}); }} className="w-full py-5 bg-indigo-600 text-white rounded-[20px] font-black text-xs uppercase tracking-widest shadow-xl shadow-indigo-100 active:scale-95 transition-all">NOTU Sƒ∞STEME ƒ∞≈ûLE</button>
                                    </div>
                                ) : (
                                    <form className="space-y-4" onSubmit={e => { e.preventDefault(); setData([{id: Date.now(), bayi: form.bayi.toUpperCase(), bolge: form.bolge.toUpperCase(), durum: 'Bekliyor', note: ''}, ...data]); setModal({open: false, type: null, id: null}); setForm({bayi:'', bolge:'', note:''}); }}>
                                        <input className="w-full p-5 bg-slate-50 rounded-2xl border border-slate-100 outline-none text-[11px] font-bold uppercase shadow-inner" placeholder="M√ú≈ûTERƒ∞ √úNVANI" required value={form.bayi} onChange={e => setForm({...form, bayi: e.target.value})} />
                                        <input className="w-full p-5 bg-slate-50 rounded-2xl border border-slate-100 outline-none text-[11px] font-bold uppercase shadow-inner" placeholder="B√ñLGE / ƒ∞L√áE" required value={form.bolge} onChange={e => setForm({...form, bolge: e.target.value})} />
                                        <button type="submit" className="w-full py-5 bg-[#0F172A] text-white rounded-[20px] font-black text-xs uppercase tracking-widest shadow-2xl mt-4 active:scale-95 transition-all">VERƒ∞TABANINA EKLE</button>
                                    </form>
                                )}
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
