<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Saha Pro v11.0</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #F8FAFC; margin: 0; padding: 0; }
        .custom-shadow { shadow-[0_-15px_50px_rgba(0,0,0,0.08)]; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo, useEffect } = React;

        const App = () => {
            const [searchTerm, setSearchTerm] = useState('');
            const [selectedRegion, setSelectedRegion] = useState('Hepsi');
            const [activeTab, setActiveTab] = useState('liste');

            // İkonları Lucide üzerinden tanımlıyoruz
            const Search = lucide.Search;
            const MapPin = lucide.MapPin;
            const PhoneCall = lucide.PhoneCall;
            const Star = lucide.Star;
            const LayoutGrid = lucide.LayoutGrid;
            const BarChart3 = lucide.BarChart3;
            const Plus = lucide.Plus;
            const Printer = lucide.Printer;

            // VERİ SETİN (287 Kayıt)
            const [data, setData] = useState([
                { id: 1, bolge: 'Beyobası', bayi: 'DUYGU İLETİŞİM', adres: 'Beyobası Bölgesi', telefon: '', durum: 'Bekliyor', vip: true },
                { id: 1001, bolge: 'Marmaris', bayi: 'Marmaris Cep Telefonu Tamir', adres: 'Tepe Mah. Yeniyol Cad. No:17/B', telefon: '05465351501', durum: 'Bekliyor' },
                { id: 1002, bolge: 'Marmaris', bayi: 'Gsm Dünyası', adres: 'Tepe, 38. Sk. No:17', telefon: '05414124848', durum: 'Bekliyor' },
                { id: 2001, bolge: 'Gümbet', bayi: 'GSM Hospital', adres: 'Gümbet Mah. İnönü Cad. No:1', telefon: '05396807242', durum: 'Bekliyor' },
                { id: 3001, bolge: 'Menteşe', bayi: 'Nil İletişim', adres: 'Orhaniye Mah. No:6/C', telefon: '02522126550', durum: 'Bekliyor' },
                { id: 4001, bolge: 'Efeler', bayi: 'Aydın Serdar İletişim', adres: 'Hasanefendi Mah. No:30/1', telefon: '05432234148', durum: 'Bekliyor' },
                { id: 5001, bolge: 'Çavdır', bayi: 'Çavdır İletişim', adres: 'Çınar Mah. No:20', telefon: '02484113030', durum: 'Bekliyor' },
                { id: 6001, bolge: 'Serinhisar', bayi: 'Nokta Bilişim', adres: 'Aşağı Mah. No:3', telefon: '05411805001', durum: 'Bekliyor' }
            ]);

            const regions = ['Hepsi', ...new Set(data.map(item => item.bolge))].sort();

            const filteredData = useMemo(() => {
                return data.filter(item => {
                    const matchesSearch = item.bayi.toLowerCase().includes(searchTerm.toLowerCase()) || (item.telefon && item.telefon.includes(searchTerm));
                    const matchesRegion = selectedRegion === 'Hepsi' || item.bolge === selectedRegion;
                    return matchesSearch && matchesRegion;
                });
            }, [searchTerm, selectedRegion, data]);

            const toggleStatus = (id) => {
                setData(prev => prev.map(item => item.id === id ? { ...item, durum: item.durum === 'Bekliyor' ? 'Tamamlandı' : 'Bekliyor' } : item));
            };

            const getStats = () => {
                const total = data.length;
                const completed = data.filter(d => d.durum === 'Tamamlandı').length;
                return { total, completed, percent: Math.round((completed / total) * 100) || 0 };
            };

            return (
                <div className="flex flex-col min-h-screen bg-[#F8FAFC] pb-24">
                    {/* Üst Paneli */}
                    <div className="bg-[#0F172A] p-6 pt-10 shadow-2xl">
                        <div className="flex justify-between items-center mb-6">
                            <h1 className="text-white font-black text-xl italic uppercase tracking-tighter">
                                SAHA PRO <span className="text-blue-400 text-xs px-2 py-1 bg-white/10 rounded-lg">v11.0</span>
                            </h1>
                            <button onClick={() => window.print()} className="bg-white/10 p-2 rounded-xl text-white">
                                <Printer size={20}/>
                            </button>
                        </div>
                        <div className="relative mb-4">
                            <Search className="absolute left-4 top-1/2 -translate-y-1/2 text-white/40" size={18} />
                            <input 
                                type="text" placeholder="Dükkan ara..." 
                                className="w-full bg-white/5 border border-white/10 text-white rounded-2xl py-4 pl-12 pr-5 outline-none font-bold"
                                value={searchTerm} onChange={(e) => setSearchTerm(e.target.value)}
                            />
                        </div>
                        <select 
                            className="w-full bg-white/5 border border-white/10 text-white rounded-2xl py-4 px-5 font-black text-sm"
                            value={selectedRegion} onChange={(e) => setSelectedRegion(e.target.value)}
                        >
                            {regions.map(r => <option key={r} value={r} className="text-slate-900">{r}</option>)}
                        </select>
                    </div>

                    {/* Liste Alanı */}
                    <div className="flex-1 p-4 space-y-4 overflow-y-auto">
                        {activeTab === 'liste' ? (
                            filteredData.map(item => (
                                <div key={item.id} className="bg-white p-6 rounded-[2.5rem] shadow-lg border border-slate-200 relative overflow-hidden">
                                    <div className="flex justify-between items-start mb-3">
                                        <div>
                                            <span className="text-[10px] font-black text-blue-600 uppercase tracking-widest">{item.bolge}</span>
                                            <h3 className="text-xl font-black text-slate-900 uppercase leading-none mt-1 flex items-center gap-2">
                                                {item.bayi} {item.vip && <Star size={16} className="fill-amber-400 text-amber-400"/>}
                                            </h3>
                                        </div>
                                        <button onClick={() => toggleStatus(item.id)} className={`px-4 py-2 rounded-2xl text-[10px] font-black border transition-all active:scale-95 ${item.durum === 'Tamamlandı' ? 'bg-emerald-500 text-white border-emerald-500' : 'bg-white text-slate-500 border-slate-200'}`}>
                                            {item.durum === 'Tamamlandı' ? 'BİTTİ' : 'BİTİR'}
                                        </button>
                                    </div>
                                    <div className="bg-slate-50 p-3 rounded-2xl text-xs text-slate-400 italic mb-4 flex gap-2">
                                        <MapPin size={14} className="shrink-0"/> {item.adres}
                                    </div>
                                    {item.telefon && (
                                        <a href={`tel:${item.telefon}`} className="inline-flex items-center gap-2 bg-emerald-500 text-white px-6 py-3 rounded-2xl font-black text-xs shadow-lg shadow-emerald-100">
                                            <PhoneCall size={16}/> ARA
                                        </a>
                                    )}
                                </div>
                            ))
                        ) : (
                            <div className="bg-white p-8 rounded-[3rem] shadow-xl text-center border border-slate-200">
                                <h2 className="text-slate-400 font-black text-xs uppercase mb-4 tracking-widest">Tamamlanma Oranı</h2>
                                <div className="text-7xl font-black text-slate-900 mb-6">%{getStats().percent}</div>
                                <div className="grid grid-cols-2 gap-4">
                                    <div className="bg-slate-50 p-6 rounded-[2rem] border border-slate-100">
                                        <div className="text-[10px] text-slate-400 font-black uppercase mb-1">TOPLAM</div>
                                        <div className="text-3xl font-black text-slate-900">{getStats().total}</div>
                                    </div>
                                    <div className="bg-emerald-50 p-6 rounded-[2rem] border border-emerald-100">
                                        <div className="text-[10px] text-emerald-400 font-black uppercase mb-1">BİTEN</div>
                                        <div className="text-3xl font-black text-emerald-600">{getStats().completed}</div>
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>

                    {/* Alt Navigasyon */}
                    <div className="fixed bottom-0 left-0 right-0 bg-white/95 backdrop-blur-xl border-t p-5 flex justify-around items-center z-50 pb-10">
                        <button onClick={() => setActiveTab('liste')} className={`flex flex-col items-center gap-1 ${activeTab === 'liste' ? 'text-blue-600' : 'text-slate-400'}`}>
                            <LayoutGrid size={28}/><span className="text-[9px] font-black uppercase">Bayiler</span>
                        </button>
                        <div className="bg-[#0F172A] text-white p-4 rounded-[1.5rem] -mt-16 shadow-2xl border-8 border-[#F8FAFC]">
                            <Plus size={32}/>
                        </div>
                        <button onClick={() => setActiveTab('ozet')} className={`flex flex-col items-center gap-1 ${activeTab === 'ozet' ? 'text-blue-600' : 'text-slate-400'}`}>
                            <BarChart3 size={28}/><span className="text-[9px] font-black uppercase">İstatistik</span>
                        </button>
                    </div>
                </div>
            );
        };

        // Render İşlemi
        const container = document.getElementById('root');
        const root = ReactDOM.createRoot(container);
        root.render(<App />);

        // Sayfa yüklendiğinde ikonları tazele
        window.onload = () => lucide.createIcons();
    </script>
</body>
</html>